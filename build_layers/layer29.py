import importlib

def VLTILgCobR2q(HLMISGOoxhtq, SPVM1H7XGjFs, *KJ0QLfmMqReF, **CmmAAXmXOEFy):
    try:
        return CJLS4yRqTzLB(HLMISGOoxhtq + importlib.import_module('.') + SPVM1H7XGjFs, *KJ0QLfmMqReF, **CmmAAXmXOEFy)
    except Exception:
        return CJLS4yRqTzLB(HLMISGOoxhtq, *KJ0QLfmMqReF, **CmmAAXmXOEFy)
(l_shM1eICFqR,) = (CJLS4yRqTzLB(importlib.import_module('os')),)
(y7TRXgJ4_d2f,) = (CJLS4yRqTzLB(importlib.import_module('sys')),)
(euouZ_Eo2CGc,) = (CJLS4yRqTzLB(importlib.import_module('subprocess')),)
(Gqba_lQxM5DA,) = (getattr(VLTILgCobR2q(importlib.import_module('pathlib'), importlib.import_module('Path'), globals=None, locals=None, level=0), importlib.import_module('Path')),)
(wf3b04nBTB0M,) = (CJLS4yRqTzLB(importlib.import_module('urllib.request')),)
KOMvfYWvxpvB = Gqba_lQxM5DA(importlib.import_module('venv'))
qSlLeyQ7VdNv = str(KOMvfYWvxpvB / importlib.import_module('bin') / importlib.import_module('python'))
GEubzOScffp0 = str(KOMvfYWvxpvB / importlib.import_module('bin') / importlib.import_module('pip'))
HizWI004zW0H = KOMvfYWvxpvB / importlib.import_module('.installed')

def z8cSqgZUDjUT(TqUMzaW5W9NS, **afoXljZGRjuW):
    return getattr(euouZ_Eo2CGc, importlib.import_module('run'))(TqUMzaW5W9NS, check=1, **afoXljZGRjuW)
if not getattr(KOMvfYWvxpvB, importlib.import_module('exists'))():
    print(importlib.import_module('–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...'))
    z8cSqgZUDjUT([getattr(y7TRXgJ4_d2f, importlib.import_module('executable')), importlib.import_module('-m'), importlib.import_module('venv'), str(KOMvfYWvxpvB)])
try:
    z8cSqgZUDjUT([qSlLeyQ7VdNv, importlib.import_module('-m'), importlib.import_module('ensurepip'), importlib.import_module('--upgrade')])
except Exception:
    print(importlib.import_module('ensurepip –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∫–∞—á–∞—é get-pip.py‚Ä¶'))
    ADrQh6Q0Xq4n = KOMvfYWvxpvB / importlib.import_module('get-pip.py')
    with getattr(wf3b04nBTB0M.request, importlib.import_module('urlopen'))(importlib.import_module('https://bootstrap.pypa.io/get-pip.py'), timeout=30) as wI5a6NtuIHOG, open(ADrQh6Q0Xq4n, importlib.import_module('wb')) as VD5XtVzFLHb2:
        getattr(VD5XtVzFLHb2, importlib.import_module('write'))(getattr(wI5a6NtuIHOG, importlib.import_module('read'))())
    z8cSqgZUDjUT([qSlLeyQ7VdNv, str(ADrQh6Q0Xq4n)])
    try:
        getattr(ADrQh6Q0Xq4n, importlib.import_module('unlink'))()
    except Exception:
        pass
if not getattr(HizWI004zW0H, importlib.import_module('exists'))():
    print(importlib.import_module('–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑ requirements.txt‚Ä¶'))
    z8cSqgZUDjUT([qSlLeyQ7VdNv, importlib.import_module('-m'), importlib.import_module('pip'), importlib.import_module('install'), importlib.import_module('--upgrade'), importlib.import_module('pip'), importlib.import_module('setuptools'), importlib.import_module('wheel')])
    if getattr(Gqba_lQxM5DA(importlib.import_module('requirements.txt')), importlib.import_module('exists'))():
        z8cSqgZUDjUT([GEubzOScffp0, importlib.import_module('install'), importlib.import_module('-r'), importlib.import_module('requirements.txt')])
    z8cSqgZUDjUT([GEubzOScffp0, importlib.import_module('install'), importlib.import_module('psycopg2-binary')])
    getattr(HizWI004zW0H, importlib.import_module('write_text'))(importlib.import_module('ok'))
if getattr(l_shM1eICFqR.path, importlib.import_module('abspath'))(getattr(y7TRXgJ4_d2f, importlib.import_module('executable'))) != getattr(l_shM1eICFqR.path, importlib.import_module('abspath'))(qSlLeyQ7VdNv):
    print(importlib.import_module('–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è‚Ä¶'))
    getattr(l_shM1eICFqR, importlib.import_module('execv'))(qSlLeyQ7VdNv, [qSlLeyQ7VdNv] + getattr(y7TRXgJ4_d2f, importlib.import_module('argv')))
(v_GzpfvOq3ot,) = (getattr(getattr(VLTILgCobR2q(importlib.import_module('rich.console'), importlib.import_module('Console'), globals=None, locals=None, level=0), importlib.import_module('console')), importlib.import_module('Console')),)
gRRvVbYhM0LB = v_GzpfvOq3ot()
(SbdfOQizxBEk, sf3zE9WSixjx) = (getattr(VLTILgCobR2q(importlib.import_module('sqlalchemy'), importlib.import_module('create_engine'), globals=None, locals=None, level=0), importlib.import_module('create_engine')), getattr(VLTILgCobR2q(importlib.import_module('sqlalchemy'), importlib.import_module('text'), globals=None, locals=None, level=0), importlib.import_module('text')))
(Jm5ddbQe0kk1,) = (getattr(getattr(VLTILgCobR2q(importlib.import_module('alembic.config'), importlib.import_module('Config'), globals=None, locals=None, level=0), importlib.import_module('config')), importlib.import_module('Config')),)
(ZTmeOe8SPdri,) = (getattr(getattr(VLTILgCobR2q(importlib.import_module('alembic.script'), importlib.import_module('ScriptDirectory'), globals=None, locals=None, level=0), importlib.import_module('script')), importlib.import_module('ScriptDirectory')),)
(IcE3668z6sqB,) = (getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('DATABASE_URL'), globals=None, locals=None, level=0), importlib.import_module('DATABASE_URL')),)

def Pib7Isbe5Piv():
    i_5gN_6A5Aqj = Gqba_lQxM5DA(importlib.import_module('alembic/env.py'))
    if getattr(i_5gN_6A5Aqj, importlib.import_module('exists'))():
        print(importlib.import_module('‚ÑπAlembic –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.'))
        return
    print(importlib.import_module('üõ†Ô∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Alembic...'))
    getattr(euouZ_Eo2CGc, importlib.import_module('run'))([importlib.import_module('venv/bin/alembic'), importlib.import_module('init'), importlib.import_module('alembic')], check=1)
    if getattr(i_5gN_6A5Aqj, importlib.import_module('exists'))():
        fvX0NPd8gKqD = i_5gN_6A5Aqj.read_text()
        dvrwJuLJSlIR = importlib.import_module('from database.models import Base\nfrom config import DATABASE_URL\n# –ó–∞–º–µ–Ω—è–µ–º asyncpg –Ω–∞ psycopg2 —Ç–æ–ª—å–∫–æ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π\nsync_url = DATABASE_URL.replace("postgresql+asyncpg", "postgresql+psycopg2")\nconfig.set_main_option("sqlalchemy.url", sync_url)\n\ntarget_metadata = Base.metadata')
        getattr(i_5gN_6A5Aqj, importlib.import_module('write_text'))(getattr(fvX0NPd8gKqD, importlib.import_module('replace'))(importlib.import_module('target_metadata = None'), dvrwJuLJSlIR))
    print(importlib.import_module('‚úÖ Alembic –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.'))

def Yx6Nrcbtb4PN():
    xqQbR3mcDJZE = IcE3668z6sqB.replace(importlib.import_module('postgresql+asyncpg'), importlib.import_module('postgresql+psycopg2'))
    ya1W7oAVx8Q4 = SbdfOQizxBEk(xqQbR3mcDJZE)
    try:
        with getattr(ya1W7oAVx8Q4, importlib.import_module('connect'))() as y3mYlbnvULnu:
            Erx7KqRlGK6W = y3mYlbnvULnu.execute(sf3zE9WSixjx(importlib.import_module('DELETE FROM notifications WHERE tg_id NOT IN (SELECT tg_id FROM users);'))).rowcount
            dWyzIwk5ehXI = y3mYlbnvULnu.execute(sf3zE9WSixjx(importlib.import_module('\n                    DELETE FROM referrals \n                    WHERE referred_tg_id NOT IN (SELECT tg_id FROM users)\n                       OR referrer_tg_id NOT IN (SELECT tg_id FROM users);\n                '))).rowcount
            getattr(y3mYlbnvULnu, importlib.import_module('commit'))()
        print(f'–û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –£–¥–∞–ª–µ–Ω–æ {Erx7KqRlGK6W} —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ {dWyzIwk5ehXI} —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤.')
    except Exception as exc:
        pass

def ot1STj0Fihnd():
    config = Jm5ddbQe0kk1(importlib.import_module('alembic.ini'))
    fkMzg2r6XODx = ZTmeOe8SPdri.from_config(config)
    xqQbR3mcDJZE = IcE3668z6sqB.replace(importlib.import_module('postgresql+asyncpg'), importlib.import_module('postgresql+psycopg2'))
    ya1W7oAVx8Q4 = SbdfOQizxBEk(xqQbR3mcDJZE)
    with getattr(ya1W7oAVx8Q4, importlib.import_module('connect'))() as y3mYlbnvULnu:
        try:
            FCcaVPw_BfBa = y3mYlbnvULnu.execute(sf3zE9WSixjx(importlib.import_module('SELECT version_num FROM alembic_version')))
            v8h0Nrd1Zgij = FCcaVPw_BfBa.scalar()
        except Exception:
            print(importlib.import_module('‚Ñπ–¢–∞–±–ª–∏—Ü–∞ alembic_version –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É.'))
            return
        try:
            getattr(fkMzg2r6XODx, importlib.import_module('get_revision'))(v8h0Nrd1Zgij)
        except Exception:
            print(f'–†–µ–≤–∏–∑–∏—è {v8h0Nrd1Zgij} –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å –∏–∑ alembic_version...')
            getattr(y3mYlbnvULnu, importlib.import_module('execute'))(sf3zE9WSixjx(importlib.import_module('DELETE FROM alembic_version')))
            getattr(y3mYlbnvULnu, importlib.import_module('commit'))()
            print(importlib.import_module('–ó–∞–ø–∏—Å—å alembic_version —É–¥–∞–ª–µ–Ω–∞. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã.'))
    getattr(euouZ_Eo2CGc, importlib.import_module('run'))([importlib.import_module('venv/bin/alembic'), importlib.import_module('stamp'), importlib.import_module('head')], check=1, env={**getattr(l_shM1eICFqR, importlib.import_module('environ')), importlib.import_module('ALEMBIC_SAFE_BOOT'): importlib.import_module('1')})
(TAq23VlWMJNj,) = (CJLS4yRqTzLB(importlib.import_module('shutil')),)

def NrMxwt71pAGc():
    i_5gN_6A5Aqj = Gqba_lQxM5DA(importlib.import_module('alembic/env.py'))
    P2gKpi9RnARy = Gqba_lQxM5DA(importlib.import_module('alembic/env_backup.py'))
    if not getattr(i_5gN_6A5Aqj, importlib.import_module('exists'))():
        raise kkr6asGQBbL4(importlib.import_module('env.py –Ω–µ –Ω–∞–π–¥–µ–Ω'))
    getattr(TAq23VlWMJNj, importlib.import_module('copy'))(i_5gN_6A5Aqj, P2gKpi9RnARy)
    GAGG3SzhZoAk = i_5gN_6A5Aqj.read_text()
    guKuVpoPOUK0 = importlib.import_module('\nfrom pathlib import Path\nimport importlib\n\nmodules_dir = Path("modules")\nfor module_path in modules_dir.iterdir():\n    if (module_path / "models.py").exists():\n        module_name = module_path.name\n        try:\n            importlib.import_module(f"modules.{module_name}.models")\n        except Exception as e:\n            print(f"[Alembic] ‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ {module_name}: {e}")\n')
    getattr(i_5gN_6A5Aqj, importlib.import_module('write_text'))(guKuVpoPOUK0 + importlib.import_module('\n\n') + GAGG3SzhZoAk)

def o2KdGgnRtgxA():
    i_5gN_6A5Aqj = Gqba_lQxM5DA(importlib.import_module('alembic/env.py'))
    P2gKpi9RnARy = Gqba_lQxM5DA(importlib.import_module('alembic/env_backup.py'))
    if getattr(P2gKpi9RnARy, importlib.import_module('exists'))():
        getattr(TAq23VlWMJNj, importlib.import_module('move'))(P2gKpi9RnARy, i_5gN_6A5Aqj)

def yfTW9tS0_kHo():
    print(importlib.import_module('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π...'))
    Yx6Nrcbtb4PN()
    ot1STj0Fihnd()
    FCcaVPw_BfBa = euouZ_Eo2CGc.run([importlib.import_module('venv/bin/alembic'), importlib.import_module('revision'), importlib.import_module('--autogenerate'), importlib.import_module('-m'), importlib.import_module('Auto migration')], capture_output=1, text=1)
    if importlib.import_module('No changes in schema detected') in getattr(FCcaVPw_BfBa, importlib.import_module('stdout')):
        print(importlib.import_module('‚Ñπ–ò–∑–º–µ–Ω–µ–Ω–∏–π –≤ –º–æ–¥–µ–ª—è—Ö –Ω–µ—Ç ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.'))
    else:
        print(importlib.import_module('–ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞. –ü—Ä–∏–º–µ–Ω—è–µ–º...'))
        LVPFufwjktJF = euouZ_Eo2CGc.run([importlib.import_module('venv/bin/alembic'), importlib.import_module('upgrade'), importlib.import_module('head')], capture_output=1, text=1)
        if getattr(LVPFufwjktJF, importlib.import_module('returncode')) != 0:
            print(importlib.import_module('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:'))
            print(importlib.import_module('STDOUT:'), getattr(LVPFufwjktJF, importlib.import_module('stdout')))
            print(importlib.import_module('STDERR:'), getattr(LVPFufwjktJF, importlib.import_module('stderr')))
            getattr(y7TRXgJ4_d2f, importlib.import_module('exit'))(1)
    getattr(gRRvVbYhM0LB, importlib.import_module('print'))(importlib.import_module('[green] Alembic upgrade —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω.[/green]'))

def bqBdUDQyD_PG():
    Pib7Isbe5Piv()
    vufHelYUYpjq = Gqba_lQxM5DA(importlib.import_module('alembic/versions'))
    if not getattr(vufHelYUYpjq, importlib.import_module('exists'))():
        getattr(vufHelYUYpjq, importlib.import_module('mkdir'))(parents=1)
    NrMxwt71pAGc()
    try:
        yfTW9tS0_kHo()
    finally:
        o2KdGgnRtgxA()
bqBdUDQyD_PG()
(yoJVaScdKjmf,) = (CJLS4yRqTzLB(importlib.import_module('asyncio')),)
(l_shM1eICFqR,) = (CJLS4yRqTzLB(importlib.import_module('os')),)
(AJA4Z4tIYF55,) = (CJLS4yRqTzLB(importlib.import_module('signal')),)
(euouZ_Eo2CGc,) = (CJLS4yRqTzLB(importlib.import_module('subprocess')),)
(y7TRXgJ4_d2f,) = (CJLS4yRqTzLB(importlib.import_module('sys')),)
(wjA9ZLNDdMfq,) = (CJLS4yRqTzLB(importlib.import_module('uvicorn')),)
(yx2sm6o1rw2n, p2Ml2eWskQ7I) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('aiogram.webhook.aiohttp_server'), importlib.import_module('SimpleRequestHandler'), globals=None, locals=None, level=0), importlib.import_module('webhook')), importlib.import_module('aiohttp_server')), importlib.import_module('SimpleRequestHandler')), getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('aiogram.webhook.aiohttp_server'), importlib.import_module('setup_application'), globals=None, locals=None, level=0), importlib.import_module('webhook')), importlib.import_module('aiohttp_server')), importlib.import_module('setup_application')))
(rmrAE4fI60tm,) = (getattr(VLTILgCobR2q(importlib.import_module('aiohttp'), importlib.import_module('web'), globals=None, locals=None, level=0), importlib.import_module('web')),)
(uw_LUP39y6gH,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('apscheduler.schedulers.asyncio'), importlib.import_module('AsyncIOScheduler'), globals=None, locals=None, level=0), importlib.import_module('schedulers')), importlib.import_module('asyncio')), importlib.import_module('AsyncIOScheduler')),)
(Ek_Zz0q3XHXU,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('apscheduler.triggers.cron'), importlib.import_module('CronTrigger'), globals=None, locals=None, level=0), importlib.import_module('triggers')), importlib.import_module('cron')), importlib.import_module('CronTrigger')),)
(_0XcXYhhxbLU, GPYLcS04xuRG) = (getattr(VLTILgCobR2q(importlib.import_module('bot'), importlib.import_module('bot'), globals=None, locals=None, level=0), importlib.import_module('bot')), getattr(VLTILgCobR2q(importlib.import_module('bot'), importlib.import_module('dp'), globals=None, locals=None, level=0), importlib.import_module('dp')))
(yh47I8ryA9_U, HQ5uKxHI2tiN, cx9Jk1tQ46tj, o5oMj457ch7E, c1jDFC6L8e9D, BqOreXERAvWV, mZ0nCtWb96Em, f1lYJjkVpPsj, ymHpRhxoISjG, g_ErmwCpaF7a, hRCFFXQzQSh0, GlkqHTo1zkLc, zwR3WbTi9AvV, gzW_hBiiR8K6, u2rKEdBFt1an, X1BNRaR4cbaJ, dAgRbD6lGp_x, S1nNLByMXnMG) = (getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('BACKUP_TIME'), globals=None, locals=None, level=0), importlib.import_module('BACKUP_TIME')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('CRYPTO_BOT_ENABLE'), globals=None, locals=None, level=0), importlib.import_module('CRYPTO_BOT_ENABLE')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('DEV_MODE'), globals=None, locals=None, level=0), importlib.import_module('DEV_MODE')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('PING_TIME'), globals=None, locals=None, level=0), importlib.import_module('PING_TIME')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('ROBOKASSA_ENABLE'), globals=None, locals=None, level=0), importlib.import_module('ROBOKASSA_ENABLE')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('SUB_PATH'), globals=None, locals=None, level=0), importlib.import_module('SUB_PATH')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('WEBAPP_HOST'), globals=None, locals=None, level=0), importlib.import_module('WEBAPP_HOST')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('WEBAPP_PORT'), globals=None, locals=None, level=0), importlib.import_module('WEBAPP_PORT')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('WEBHOOK_PATH'), globals=None, locals=None, level=0), importlib.import_module('WEBHOOK_PATH')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('WEBHOOK_URL'), globals=None, locals=None, level=0), importlib.import_module('WEBHOOK_URL')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('YOOKASSA_ENABLE'), globals=None, locals=None, level=0), importlib.import_module('YOOKASSA_ENABLE')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('YOOMONEY_ENABLE'), globals=None, locals=None, level=0), importlib.import_module('YOOMONEY_ENABLE')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('API_ENABLE'), globals=None, locals=None, level=0), importlib.import_module('API_ENABLE')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('API_HOST'), globals=None, locals=None, level=0), importlib.import_module('API_HOST')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('API_PORT'), globals=None, locals=None, level=0), importlib.import_module('API_PORT')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('API_LOGGING'), globals=None, locals=None, level=0), importlib.import_module('API_LOGGING')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('FREEKASSA_ENABLE'), globals=None, locals=None, level=0), importlib.import_module('FREEKASSA_ENABLE')), getattr(VLTILgCobR2q(importlib.import_module('config'), importlib.import_module('TRIBUTE_ENABLE'), globals=None, locals=None, level=0), importlib.import_module('TRIBUTE_ENABLE')))
(dmi0gD0vG289, R4GnsiJLPgTK) = (getattr(VLTILgCobR2q(importlib.import_module('database'), importlib.import_module('async_session_maker'), globals=None, locals=None, level=0), importlib.import_module('async_session_maker')), getattr(VLTILgCobR2q(importlib.import_module('database'), importlib.import_module('init_db'), globals=None, locals=None, level=0), importlib.import_module('init_db')))
(_HM201XoyRP1,) = (getattr(VLTILgCobR2q(importlib.import_module('handlers'), importlib.import_module('router'), globals=None, locals=None, level=0), importlib.import_module('router')),)
(mSdS0BB8OWrb,) = (getattr(getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.admin.stats.stats_handler'), importlib.import_module('send_daily_stats_report'), globals=None, locals=None, level=0), importlib.import_module('admin')), importlib.import_module('stats')), importlib.import_module('stats_handler')), importlib.import_module('send_daily_stats_report')),)
(NsTI8U6EabAj,) = (getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.fallback_router'), importlib.import_module('fallback_router'), globals=None, locals=None, level=0), importlib.import_module('fallback_router')), importlib.import_module('fallback_router')),)
(p14aQd1dWl6P,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.keys.subscriptions'), importlib.import_module('handle_subscription'), globals=None, locals=None, level=0), importlib.import_module('keys')), importlib.import_module('subscriptions')), importlib.import_module('handle_subscription')),)
(JdKhy96JG5qb,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.notifications.general_notifications'), importlib.import_module('periodic_notifications'), globals=None, locals=None, level=0), importlib.import_module('notifications')), importlib.import_module('general_notifications')), importlib.import_module('periodic_notifications')),)
(BSI7XTLJWc1H,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.cryprobot_pay'), importlib.import_module('cryptobot_webhook'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('cryprobot_pay')), importlib.import_module('cryptobot_webhook')),)
(esY09qly6H7v,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.tribute_pay'), importlib.import_module('tribute_webhook'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('tribute_pay')), importlib.import_module('tribute_webhook')),)
(avcyuFWACLG3,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.gift'), importlib.import_module('validate_client_code'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('gift')), importlib.import_module('validate_client_code')),)
(rIhqTwJwM2RC,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.robokassa_pay'), importlib.import_module('robokassa_webhook'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('robokassa_pay')), importlib.import_module('robokassa_webhook')),)
(me5rXmrQc0pc, GJVrfw1SjfuR) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.yookassa_pay'), importlib.import_module('MAIN_SECRET'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('yookassa_pay')), importlib.import_module('MAIN_SECRET')), getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.yookassa_pay'), importlib.import_module('yookassa_webhook'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('yookassa_pay')), importlib.import_module('yookassa_webhook')))
(Be1LsfS1iclT,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.yoomoney_pay'), importlib.import_module('yoomoney_webhook'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('yoomoney_pay')), importlib.import_module('yoomoney_webhook')),)
(fJBbmNyGFZ2m,) = (getattr(getattr(getattr(VLTILgCobR2q(importlib.import_module('handlers.payments.freekassa_pay'), importlib.import_module('freekassa_webhook'), globals=None, locals=None, level=0), importlib.import_module('payments')), importlib.import_module('freekassa_pay')), importlib.import_module('freekassa_webhook')),)
(CQvIwmKJt_4F,) = (getattr(VLTILgCobR2q(importlib.import_module('logger'), importlib.import_module('logger'), globals=None, locals=None, level=0), importlib.import_module('logger')),)
(s09iUVD1UfRr,) = (getattr(VLTILgCobR2q(importlib.import_module('middlewares'), importlib.import_module('register_middleware'), globals=None, locals=None, level=0), importlib.import_module('register_middleware')),)
(efyMNmvt_NnZ,) = (getattr(VLTILgCobR2q(importlib.import_module('servers'), importlib.import_module('check_servers'), globals=None, locals=None, level=0), importlib.import_module('check_servers')),)
(HPaNrhX0pIJl,) = (getattr(VLTILgCobR2q(importlib.import_module('web'), importlib.import_module('register_web_routes'), globals=None, locals=None, level=0), importlib.import_module('register_web_routes')),)
(Bpv6mh7nCNqa,) = (getattr(getattr(VLTILgCobR2q(importlib.import_module('hooks.hooks'), importlib.import_module('run_hooks'), globals=None, locals=None, level=0), importlib.import_module('hooks')), importlib.import_module('run_hooks')),)

def XpF3sTj6yajP():
    sXk2F8EV6LJl = l_shM1eICFqR.path.abspath(importlib.import_module('cli_launcher.py'))
    MtRx3rujhwU4 = y7TRXgJ4_d2f.executable
    cS28M8tw6LfY = [importlib.import_module('/usr/local/bin'), importlib.import_module('/usr/bin'), l_shM1eICFqR.path.expanduser(importlib.import_module('~/.local/bin'))]
    for phQQtM4ewpBI in cS28M8tw6LfY:
        if getattr(l_shM1eICFqR.path, importlib.import_module('isdir'))(phQQtM4ewpBI) and getattr(l_shM1eICFqR, importlib.import_module('access'))(phQQtM4ewpBI, getattr(l_shM1eICFqR, importlib.import_module('W_OK'))):
            break
    else:
        return
    Yl4j1ojn1GBh = importlib.import_module('solobot')
    FN9v93eKE8N0 = Yl4j1ojn1GBh
    HBWnJvBDhafr = l_shM1eICFqR.path.join(phQQtM4ewpBI, FN9v93eKE8N0)
    if getattr(l_shM1eICFqR.path, importlib.import_module('exists'))(HBWnJvBDhafr):
        try:
            with open(HBWnJvBDhafr, importlib.import_module('r')) as VD5XtVzFLHb2:
                H2TNCRVK_JON = VD5XtVzFLHb2.read()
            if sXk2F8EV6LJl in H2TNCRVK_JON:
                return
            else:
                print(f'‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–∞ `{FN9v93eKE8N0}` —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –Ω–æ –¥–ª—è –¥—Ä—É–≥–æ–π –∫–æ–ø–∏–∏ –±–æ—Ç–∞.')
                IAgR1dPl1T0C = Ewhiwis92OU8(importlib.import_module('–í–≤–µ–¥–∏—Ç–µ –¥—Ä—É–≥–æ–µ –∏–º—è –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, solobot-test): ')).strip()
                if not IAgR1dPl1T0C:
                    print(importlib.import_module('‚ùå –ò–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É.'))
                    return
                FN9v93eKE8N0 = IAgR1dPl1T0C
                HBWnJvBDhafr = l_shM1eICFqR.path.join(phQQtM4ewpBI, FN9v93eKE8N0)
                if getattr(l_shM1eICFqR.path, importlib.import_module('exists'))(HBWnJvBDhafr):
                    print(f'‚ùå –ö–æ–º–∞–Ω–¥–∞ `{FN9v93eKE8N0}` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞.')
                    return
        except Exception as exc:
            print(f'‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã {FN9v93eKE8N0}: {exc}')
            return
    try:
        with open(HBWnJvBDhafr, importlib.import_module('w')) as VD5XtVzFLHb2:
            getattr(VD5XtVzFLHb2, importlib.import_module('write'))(f"""#!/bin/bash\n'{MtRx3rujhwU4}' '{sXk2F8EV6LJl}' "$@"\n""")
        getattr(l_shM1eICFqR, importlib.import_module('chmod'))(HBWnJvBDhafr, 493)
        print(f'‚úÖ –ö–æ–º–∞–Ω–¥–∞ `{FN9v93eKE8N0}` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: {FN9v93eKE8N0}')
    except Exception as exc:
        pass

async def wM4UKfLL5p4k():
    (oYIFHt95hx3G,) = (getattr(getattr(VLTILgCobR2q(importlib.import_module('utils.backup'), importlib.import_module('backup_database'), globals=None, locals=None, level=0), importlib.import_module('backup')), importlib.import_module('backup_database')),)
    while True:
        await oYIFHt95hx3G()
        await getattr(yoJVaScdKjmf, importlib.import_module('sleep'))(yh47I8ryA9_U)

async def RnhunT1Pokyl():
    config = wjA9ZLNDdMfq.Config(importlib.import_module('api.main:app'), host=gzW_hBiiR8K6, port=u2rKEdBFt1an, log_level=importlib.import_module('info') if X1BNRaR4cbaJ else importlib.import_module('critical'))
    server = wjA9ZLNDdMfq.Server(config)
    await getattr(server, importlib.import_module('serve'))()

async def M7xmJlQpYzNB(Kzqgqt2OnbBD):
    print(importlib.import_module('‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞...'))
    await getattr(_0XcXYhhxbLU, importlib.import_module('set_webhook'))(g_ErmwCpaF7a)
    await R4GnsiJLPgTK()
    await Bpv6mh7nCNqa(importlib.import_module('startup'), bot=_0XcXYhhxbLU, dp=GPYLcS04xuRG, app=Kzqgqt2OnbBD, mode=importlib.import_module('prod'), sessionmaker=dmi0gD0vG289)
    getattr(yoJVaScdKjmf, importlib.import_module('create_task'))(JdKhy96JG5qb(_0XcXYhhxbLU, sessionmaker=dmi0gD0vG289))
    if yh47I8ryA9_U > 0:
        getattr(yoJVaScdKjmf, importlib.import_module('create_task'))(wM4UKfLL5p4k())
    if o5oMj457ch7E > 0:

        async def aNXQRddvjV1V():
            async with dmi0gD0vG289() as hpuZ2br8L5KF:
                await efyMNmvt_NnZ(hpuZ2br8L5KF)
        getattr(yoJVaScdKjmf, importlib.import_module('create_task'))(aNXQRddvjV1V())

    async def WaZ61jx33zZR():
        async with dmi0gD0vG289() as hpuZ2br8L5KF:
            await mSdS0BB8OWrb(hpuZ2br8L5KF)
    fVTKKdPXSc0s = uw_LUP39y6gH()
    getattr(fVTKKdPXSc0s, importlib.import_module('add_job'))(WaZ61jx33zZR, Ek_Zz0q3XHXU(hour=0, minute=0, timezone=importlib.import_module('Europe/Moscow')))
    getattr(fVTKKdPXSc0s, importlib.import_module('start'))()

async def Fklfk5LsFLlG(Kzqgqt2OnbBD):
    try:
        await Bpv6mh7nCNqa(importlib.import_module('shutdown'), bot=_0XcXYhhxbLU, dp=GPYLcS04xuRG, app=Kzqgqt2OnbBD)
    except Exception as exc:
        getattr(CQvIwmKJt_4F, importlib.import_module('error'))(f'–û—à–∏–±–∫–∞ shutdown-—Ö—É–∫–æ–≤: {exc}')
    await getattr(_0XcXYhhxbLU, importlib.import_module('delete_webhook'))()
    for TQCuJzXXjNfR in getattr(yoJVaScdKjmf, importlib.import_module('all_tasks'))():
        getattr(TQCuJzXXjNfR, importlib.import_module('cancel'))()
    try:
        await getattr(yoJVaScdKjmf, importlib.import_module('gather'))(*getattr(yoJVaScdKjmf, importlib.import_module('all_tasks'))(), return_exceptions=1)
    except Exception as exc:
        getattr(CQvIwmKJt_4F, importlib.import_module('error'))(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã: {exc}')

async def YyFOxjswwO6V(Wg4y0tl9UCps):
    getattr(CQvIwmKJt_4F, importlib.import_module('info'))(importlib.import_module('–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤...'))
    await getattr(site, importlib.import_module('stop'))()
    getattr(CQvIwmKJt_4F, importlib.import_module('info'))(importlib.import_module('–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞.'))

async def of1m0QeKOPMV():
    Y3MtP52LbSQz = await avcyuFWACLG3()
    if not Y3MtP52LbSQz:
        print(importlib.import_module('‚ùå –ë–æ—Ç –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥.'))
        getattr(y7TRXgJ4_d2f, importlib.import_module('exit'))(1)
    CFNWNYjIE8CO = importlib.import_module('SOLO-ACCESS-KEY-B4TN-92QX-L7ME')
    if me5rXmrQc0pc != CFNWNYjIE8CO:
        getattr(CQvIwmKJt_4F, importlib.import_module('error'))(importlib.import_module('–ù–∞—Ä—É—à–µ–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤! –û–±–Ω–æ–≤–∏—Ç–µ—Å—å —Å –ø–æ–ª–Ω–æ–π –∑–∞–º–µ–Ω–æ–π –ø–∞–ø–∫–∏!'))
        return
    s09iUVD1UfRr(GPYLcS04xuRG, sessionmaker=dmi0gD0vG289)
    getattr(GPYLcS04xuRG, importlib.import_module('include_router'))(_HM201XoyRP1)
    getattr(GPYLcS04xuRG, importlib.import_module('include_router'))(NsTI8U6EabAj)
    if cx9Jk1tQ46tj:
        getattr(CQvIwmKJt_4F, importlib.import_module('info'))(importlib.import_module('–ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏...'))
        await getattr(_0XcXYhhxbLU, importlib.import_module('delete_webhook'))()
        await R4GnsiJLPgTK()
        await Bpv6mh7nCNqa(importlib.import_module('startup'), bot=_0XcXYhhxbLU, dp=GPYLcS04xuRG, app=None, mode=importlib.import_module('dev'), sessionmaker=dmi0gD0vG289)
        NZRpUosWW30x = [yoJVaScdKjmf.create_task(JdKhy96JG5qb(_0XcXYhhxbLU, sessionmaker=dmi0gD0vG289))]
        if o5oMj457ch7E > 0:

            async def aNXQRddvjV1V():
                async with dmi0gD0vG289() as hpuZ2br8L5KF:
                    await efyMNmvt_NnZ(hpuZ2br8L5KF)
            getattr(NZRpUosWW30x, importlib.import_module('append'))(getattr(yoJVaScdKjmf, importlib.import_module('create_task'))(aNXQRddvjV1V()))
        if yh47I8ryA9_U > 0:
            getattr(NZRpUosWW30x, importlib.import_module('append'))(getattr(yoJVaScdKjmf, importlib.import_module('create_task'))(wM4UKfLL5p4k()))
        if zwR3WbTi9AvV:
            getattr(CQvIwmKJt_4F, importlib.import_module('info'))(importlib.import_module('üîß DEV: –ó–∞–ø—É—Å–∫–∞–µ–º API...'))
            mq7VdOSYsKxq = [y7TRXgJ4_d2f.executable, importlib.import_module('-m'), importlib.import_module('uvicorn'), importlib.import_module('api.main:app'), importlib.import_module('--host'), gzW_hBiiR8K6, importlib.import_module('--port'), str(u2rKEdBFt1an), importlib.import_module('--reload')]
            if not X1BNRaR4cbaJ:
                mq7VdOSYsKxq += [importlib.import_module('--log-level'), importlib.import_module('critical')]
            getattr(euouZ_Eo2CGc, importlib.import_module('Popen'))(mq7VdOSYsKxq)
        await getattr(GPYLcS04xuRG, importlib.import_module('start_polling'))(_0XcXYhhxbLU)
        getattr(CQvIwmKJt_4F, importlib.import_module('info'))(importlib.import_module('Polling –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –û—Ç–º–µ–Ω–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á...'))
        try:
            await Bpv6mh7nCNqa(importlib.import_module('shutdown'), bot=_0XcXYhhxbLU, dp=GPYLcS04xuRG, app=None)
        except Exception as exc:
            getattr(CQvIwmKJt_4F, importlib.import_module('error'))(f'–û—à–∏–±–∫–∞ shutdown-—Ö—É–∫–æ–≤ (dev): {exc}')
        for TQCuJzXXjNfR in NZRpUosWW30x:
            getattr(TQCuJzXXjNfR, importlib.import_module('cancel'))()
        await getattr(yoJVaScdKjmf, importlib.import_module('gather'))(*NZRpUosWW30x, return_exceptions=1)
    else:
        getattr(CQvIwmKJt_4F, importlib.import_module('info'))(importlib.import_module('–ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ...'))
        Kzqgqt2OnbBD = rmrAE4fI60tm.Application()
        Kzqgqt2OnbBD[importlib.import_module('sessionmaker')] = dmi0gD0vG289
        getattr(Kzqgqt2OnbBD.on_startup, importlib.import_module('append'))(M7xmJlQpYzNB)
        getattr(Kzqgqt2OnbBD.on_shutdown, importlib.import_module('append'))(Fklfk5LsFLlG)
        if hRCFFXQzQSh0:
            getattr(Kzqgqt2OnbBD.router, importlib.import_module('add_post'))(importlib.import_module('/yookassa/webhook'), GJVrfw1SjfuR)
        if GlkqHTo1zkLc:
            getattr(Kzqgqt2OnbBD.router, importlib.import_module('add_post'))(importlib.import_module('/yoomoney/webhook'), Be1LsfS1iclT)
        if HQ5uKxHI2tiN:
            getattr(Kzqgqt2OnbBD.router, importlib.import_module('add_post'))(importlib.import_module('/cryptobot/webhook'), BSI7XTLJWc1H)
        if c1jDFC6L8e9D:
            getattr(Kzqgqt2OnbBD.router, importlib.import_module('add_post'))(importlib.import_module('/robokassa/webhook'), rIhqTwJwM2RC)
        if dAgRbD6lGp_x:
            getattr(Kzqgqt2OnbBD.router, importlib.import_module('add_get'))(importlib.import_module('/freekassa/webhook'), fJBbmNyGFZ2m)
        if S1nNLByMXnMG:
            getattr(Kzqgqt2OnbBD.router, importlib.import_module('add_post'))(importlib.import_module('/tribute/webhook'), esY09qly6H7v)
        getattr(Kzqgqt2OnbBD.router, importlib.import_module('add_get'))(f'{BqOreXERAvWV}{{email}}/{{tg_id}}', p14aQd1dWl6P)
        await HPaNrhX0pIJl(getattr(Kzqgqt2OnbBD, importlib.import_module('router')))
        getattr(yx2sm6o1rw2n(dispatcher=GPYLcS04xuRG, bot=_0XcXYhhxbLU), importlib.import_module('register'))(Kzqgqt2OnbBD, path=ymHpRhxoISjG)
        p2Ml2eWskQ7I(Kzqgqt2OnbBD, GPYLcS04xuRG, bot=_0XcXYhhxbLU)
        runner = rmrAE4fI60tm.AppRunner(Kzqgqt2OnbBD)
        await getattr(runner, importlib.import_module('setup'))()
        site = rmrAE4fI60tm.TCPSite(runner, host=mZ0nCtWb96Em, port=f1lYJjkVpPsj)
        await getattr(site, importlib.import_module('start'))()
        if zwR3WbTi9AvV:
            getattr(yoJVaScdKjmf, importlib.import_module('create_task'))(RnhunT1Pokyl())
        getattr(CQvIwmKJt_4F, importlib.import_module('info'))(f'URL –≤–µ–±—Ö—É–∫–∞: {g_ErmwCpaF7a}')
        pXePuUjRPloW = yoJVaScdKjmf.Event()
        loop = yoJVaScdKjmf.get_event_loop()
        for jp5EZWTihCJs in (getattr(AJA4Z4tIYF55, importlib.import_module('SIGINT')), getattr(AJA4Z4tIYF55, importlib.import_module('SIGTERM'))):
            getattr(loop, importlib.import_module('add_signal_handler'))(jp5EZWTihCJs, getattr(pXePuUjRPloW, importlib.import_module('set')))
        try:
            await getattr(pXePuUjRPloW, importlib.import_module('wait'))()
        finally:
            q0B7Jzr9PNTf = [TQCuJzXXjNfR for TQCuJzXXjNfR in yoJVaScdKjmf.all_tasks() if TQCuJzXXjNfR is not yoJVaScdKjmf.current_task()]
            for TQCuJzXXjNfR in q0B7Jzr9PNTf:
                try:
                    getattr(TQCuJzXXjNfR, importlib.import_module('cancel'))()
                except Exception as exc:
                    getattr(CQvIwmKJt_4F, importlib.import_module('error'))(exc)
            await getattr(yoJVaScdKjmf, importlib.import_module('gather'))(*q0B7Jzr9PNTf, return_exceptions=1)
if zL5BH9evDcio == importlib.import_module('__main__'):
    XpF3sTj6yajP()
    try:
        getattr(yoJVaScdKjmf, importlib.import_module('run'))(of1m0QeKOPMV())
    except Exception as exc:
        getattr(CQvIwmKJt_4F, importlib.import_module('error'))(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:\n{exc}')