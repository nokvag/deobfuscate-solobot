u1KQ2EguJKQ7 = lambda UWdGO89tcyS7: bytes([Sa8e3lqr_V8J ^ [52, 110, 239, 144, 44, 41, 159, 75, 3, 6, 111, 45, 15, 232, 5, 136, 186, 101, 136, 199, 76, 59, 74, 28, 139, 166, 10, 120, 93, 139, 58, 48, 248, 136, 234, 128, 174, 58, 109, 129][Dihj1QYMQ6NC % 40] for (Dihj1QYMQ6NC, Sa8e3lqr_V8J) in enumerate(UWdGO89tcyS7)])

def slBqQzRHEsUg(I3TrM73hju6F, sXfSEpzNzWP5, *AWcbN0PPHoI1, **RSLz52gI66iZ):
    try:
        return __import__(I3TrM73hju6F + '.'.decode('utf-8') + sXfSEpzNzWP5, *AWcbN0PPHoI1, **RSLz52gI66iZ)
    except ImportError:
        return __import__(I3TrM73hju6F, *AWcbN0PPHoI1, **RSLz52gI66iZ)
(diyel4O5bMLs,) = (__import__('asyncio'.decode('utf-8')),)
(pqP1JQ7q8C2M,) = (__import__('signal'.decode('utf-8')),)
(m0HGG4fFzMqQ, LUxf4g0U9GW3) = (getattr(getattr(getattr(slBqQzRHEsUg('aiogram.webhook.aiohttp_server'.decode('utf-8'), 'SimpleRequestHandler'.decode('utf-8'), globals=None, locals=None, level=0), 'webhook'.decode('utf-8')), 'aiohttp_server'.decode('utf-8')), 'SimpleRequestHandler'.decode('utf-8')), getattr(getattr(getattr(slBqQzRHEsUg('aiogram.webhook.aiohttp_server'.decode('utf-8'), 'setup_application'.decode('utf-8'), globals=None, locals=None, level=0), 'webhook'.decode('utf-8')), 'aiohttp_server'.decode('utf-8')), 'setup_application'.decode('utf-8')))
(fq44kslIKKlh,) = (getattr(slBqQzRHEsUg('aiohttp'.decode('utf-8'), 'web'.decode('utf-8'), globals=None, locals=None, level=0), 'web'.decode('utf-8')),)
(CixZZL1caaDz,) = (getattr(slBqQzRHEsUg('backup'.decode('utf-8'), 'backup_database'.decode('utf-8'), globals=None, locals=None, level=0), 'backup_database'.decode('utf-8')),)
(GiFJytvAvueM, _dIJgk7A3AIg) = (getattr(slBqQzRHEsUg('bot'.decode('utf-8'), 'bot'.decode('utf-8'), globals=None, locals=None, level=0), 'bot'.decode('utf-8')), getattr(slBqQzRHEsUg('bot'.decode('utf-8'), 'dp'.decode('utf-8'), globals=None, locals=None, level=0), 'dp'.decode('utf-8')))
(a5c3UP8TmpNy, osp164bN12E4, VWiaMPSC0NzU, DfumMdwt5gQ6, fqoAVnVIRd_I, K585qaYUbA_y, iWt7SquS5uxf, LDZldmpRRXTP, jpvzaVV9Pk2G, Di3ZYNq4y1Jk, sDa0ySHsUBbE, U3RbnQ1KQ4Bf, QnsUyBGFs1xi) = (getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'BACKUP_TIME'.decode('utf-8'), globals=None, locals=None, level=0), 'BACKUP_TIME'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'CRYPTO_BOT_ENABLE'.decode('utf-8'), globals=None, locals=None, level=0), 'CRYPTO_BOT_ENABLE'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'DEV_MODE'.decode('utf-8'), globals=None, locals=None, level=0), 'DEV_MODE'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'LEGACY_ENABLE'.decode('utf-8'), globals=None, locals=None, level=0), 'LEGACY_ENABLE'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'ROBOKASSA_ENABLE'.decode('utf-8'), globals=None, locals=None, level=0), 'ROBOKASSA_ENABLE'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'SUB_PATH'.decode('utf-8'), globals=None, locals=None, level=0), 'SUB_PATH'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'WEBAPP_HOST'.decode('utf-8'), globals=None, locals=None, level=0), 'WEBAPP_HOST'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'WEBAPP_PORT'.decode('utf-8'), globals=None, locals=None, level=0), 'WEBAPP_PORT'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'WEBHOOK_PATH'.decode('utf-8'), globals=None, locals=None, level=0), 'WEBHOOK_PATH'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'WEBHOOK_URL'.decode('utf-8'), globals=None, locals=None, level=0), 'WEBHOOK_URL'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'YOOKASSA_ENABLE'.decode('utf-8'), globals=None, locals=None, level=0), 'YOOKASSA_ENABLE'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'YOOMONEY_ENABLE'.decode('utf-8'), globals=None, locals=None, level=0), 'YOOMONEY_ENABLE'.decode('utf-8')), getattr(slBqQzRHEsUg('config'.decode('utf-8'), 'PING_TIME'.decode('utf-8'), globals=None, locals=None, level=0), 'PING_TIME'.decode('utf-8')))
(mhwkmweqvIZS,) = (getattr(slBqQzRHEsUg('database'.decode('utf-8'), 'init_db'.decode('utf-8'), globals=None, locals=None, level=0), 'init_db'.decode('utf-8')),)
(vlARRACoCOHo,) = (getattr(slBqQzRHEsUg('handlers'.decode('utf-8'), 'router'.decode('utf-8'), globals=None, locals=None, level=0), 'router'.decode('utf-8')),)
(hQCziMO4TGCZ, CjTWspeGMliC) = (getattr(getattr(getattr(slBqQzRHEsUg('handlers.keys.subscriptions'.decode('utf-8'), 'handle_new_subscription'.decode('utf-8'), globals=None, locals=None, level=0), 'keys'.decode('utf-8')), 'subscriptions'.decode('utf-8')), 'handle_new_subscription'.decode('utf-8')), getattr(getattr(getattr(slBqQzRHEsUg('handlers.keys.subscriptions'.decode('utf-8'), 'handle_old_subscription'.decode('utf-8'), globals=None, locals=None, level=0), 'keys'.decode('utf-8')), 'subscriptions'.decode('utf-8')), 'handle_old_subscription'.decode('utf-8')))
(fLL8E8IGPK8S,) = (getattr(getattr(getattr(slBqQzRHEsUg('handlers.notifications.general_notifications'.decode('utf-8'), 'periodic_notifications'.decode('utf-8'), globals=None, locals=None, level=0), 'notifications'.decode('utf-8')), 'general_notifications'.decode('utf-8')), 'periodic_notifications'.decode('utf-8')),)
(URH6xO9_OvAX,) = (getattr(getattr(getattr(slBqQzRHEsUg('handlers.payments.cryprobot_pay'.decode('utf-8'), 'cryptobot_webhook'.decode('utf-8'), globals=None, locals=None, level=0), 'payments'.decode('utf-8')), 'cryprobot_pay'.decode('utf-8')), 'cryptobot_webhook'.decode('utf-8')),)
(r1KJRGSk6S_M,) = (getattr(getattr(getattr(slBqQzRHEsUg('handlers.payments.gift'.decode('utf-8'), 'validate_client_code'.decode('utf-8'), globals=None, locals=None, level=0), 'payments'.decode('utf-8')), 'gift'.decode('utf-8')), 'validate_client_code'.decode('utf-8')),)
(eVzbKhmdRT7G,) = (getattr(getattr(getattr(slBqQzRHEsUg('handlers.payments.robokassa_pay'.decode('utf-8'), 'robokassa_webhook'.decode('utf-8'), globals=None, locals=None, level=0), 'payments'.decode('utf-8')), 'robokassa_pay'.decode('utf-8')), 'robokassa_webhook'.decode('utf-8')),)
(FMmGOBZBev8A, gLLuUhpdiNZQ) = (getattr(getattr(getattr(slBqQzRHEsUg('handlers.payments.yookassa_pay'.decode('utf-8'), 'MAIN_SECRET'.decode('utf-8'), globals=None, locals=None, level=0), 'payments'.decode('utf-8')), 'yookassa_pay'.decode('utf-8')), 'MAIN_SECRET'.decode('utf-8')), getattr(getattr(getattr(slBqQzRHEsUg('handlers.payments.yookassa_pay'.decode('utf-8'), 'yookassa_webhook'.decode('utf-8'), globals=None, locals=None, level=0), 'payments'.decode('utf-8')), 'yookassa_pay'.decode('utf-8')), 'yookassa_webhook'.decode('utf-8')))
(FHt_8BTqROto,) = (getattr(getattr(getattr(slBqQzRHEsUg('handlers.payments.yoomoney_pay'.decode('utf-8'), 'yoomoney_webhook'.decode('utf-8'), globals=None, locals=None, level=0), 'payments'.decode('utf-8')), 'yoomoney_pay'.decode('utf-8')), 'yoomoney_webhook'.decode('utf-8')),)
(zcptFAL0yWNU,) = (getattr(slBqQzRHEsUg('logger'.decode('utf-8'), 'logger'.decode('utf-8'), globals=None, locals=None, level=0), 'logger'.decode('utf-8')),)
(I9T087Aiov_5,) = (getattr(slBqQzRHEsUg('servers'.decode('utf-8'), 'check_servers'.decode('utf-8'), globals=None, locals=None, level=0), 'check_servers'.decode('utf-8')),)
(KTcuB6QKV8WZ,) = (__import__('os'.decode('utf-8')),)
(gtWK63WYa3JX,) = (__import__('sys'.decode('utf-8')),)

def QK5bLxBOypkF():
    NufvPSR1AQNx = KTcuB6QKV8WZ.path.abspath('cli_launcher.py'.decode('utf-8'))
    lsHnbTESTPag = gtWK63WYa3JX.executable
    u4Kgw2xftrng = ['/usr/local/bin'.decode('utf-8'), '/usr/bin'.decode('utf-8'), KTcuB6QKV8WZ.path.expanduser('~/.local/bin'.decode('utf-8'))]
    for LjLi2w1n0i3h in u4Kgw2xftrng:
        if getattr(KTcuB6QKV8WZ.path, 'isdir'.decode('utf-8'))(LjLi2w1n0i3h) and getattr(KTcuB6QKV8WZ, 'access'.decode('utf-8'))(LjLi2w1n0i3h, getattr(KTcuB6QKV8WZ, 'W_OK'.decode('utf-8'))):
            DK9LsyO02L_J = KTcuB6QKV8WZ.path.join(LjLi2w1n0i3h, 'solobot'.decode('utf-8'))
            break
    else:
        print('❌ Не удалось найти подходящий каталог для установки команды `solobot`.'.decode('utf-8'))
        return
    if getattr(KTcuB6QKV8WZ.path, 'exists'.decode('utf-8'))(DK9LsyO02L_J):
        return
    try:
        with open(DK9LsyO02L_J, 'w'.decode('utf-8')) as HohFPgdHHRgg:
            getattr(HohFPgdHHRgg, 'write'.decode('utf-8'))(f"""#!/bin/bash\n'{lsHnbTESTPag}' '{NufvPSR1AQNx}' "$@"\n""")
        getattr(KTcuB6QKV8WZ, 'chmod'.decode('utf-8'))(DK9LsyO02L_J, 493)
        print(fchr(9989) + ' ' + 'К' + 'о' + 'м' + 'а' + 'н' + 'д' + 'а' + ' ' + '`' + 's' + 'o' + 'l' + 'o' + 'b' + 'o' + 't' + '`' + ' ' + 'у' + 'с' + 'т' + 'а' + 'н' + 'о' + 'в' + 'л' + 'е' + 'н' + 'а' + '!' + ' ' + 'И' + 'с' + 'п' + 'о' + 'л' + 'ь' + 'з' + 'у' + 'й' + 'т' + 'е' + ':' + ' ' + 's' + 'o' + 'l' + 'o' + 'b' + 'o' + 't')
    except Exception as hsEaj3FbHlV3:
        print(f'❌ Ошибка установки команды solobot: {hsEaj3FbHlV3}')

async def D6P0eecBAFVv():
    while 1:
        await CixZZL1caaDz()
        await getattr(diyel4O5bMLs, 'sleep'.decode('utf-8'))(a5c3UP8TmpNy)

async def M6flxKL4gRoX(lqCBDe1lOEOd):
    await getattr(GiFJytvAvueM, 'set_webhook'.decode('utf-8'))(Di3ZYNq4y1Jk)
    await mhwkmweqvIZS()
    getattr(diyel4O5bMLs, 'create_task'.decode('utf-8'))(fLL8E8IGPK8S(GiFJytvAvueM))
    if a5c3UP8TmpNy > 0:
        getattr(diyel4O5bMLs, 'create_task'.decode('utf-8'))(D6P0eecBAFVv())
    if QnsUyBGFs1xi > 0:
        getattr(diyel4O5bMLs, 'create_task'.decode('utf-8'))(I9T087Aiov_5())

async def KMS7j9IC8wK5(lqCBDe1lOEOd):
    await getattr(GiFJytvAvueM, 'delete_webhook'.decode('utf-8'))()
    for NwVNoYZ0lVgA in getattr(diyel4O5bMLs, 'all_tasks'.decode('utf-8'))():
        getattr(NwVNoYZ0lVgA, 'cancel'.decode('utf-8'))()
    try:
        await getattr(diyel4O5bMLs, 'gather'.decode('utf-8'))(*getattr(diyel4O5bMLs, 'all_tasks'.decode('utf-8'))(), return_exceptions=1)
    except Exception as hsEaj3FbHlV3:
        getattr(zcptFAL0yWNU, 'error'.decode('utf-8'))(f'Ошибка при завершении работы: {hsEaj3FbHlV3}')

async def o_Zg3SYZ2U_F(JutrLWyLwTzT):
    getattr(zcptFAL0yWNU, 'info'.decode('utf-8'))('Остановка вебхуков...'.decode('utf-8'))
    await getattr(JutrLWyLwTzT, 'stop'.decode('utf-8'))()
    getattr(zcptFAL0yWNU, 'info'.decode('utf-8'))('Остановка бота.'.decode('utf-8'))

async def WeQFJHP3LH_W():
    _SvfhKl8rD1_ = await r1KJRGSk6S_M()
    if not _SvfhKl8rD1_:
        getattr(zcptFAL0yWNU, 'error'.decode('utf-8'))('Бот не активирован. Проверьте ваш клиентский код.'.decode('utf-8'))
        return
    JezwpIWfYHOX = 'SOLO-ACCESS-KEY-B4TN-92QX-L7ME'.decode('utf-8')
    if FMmGOBZBev8A != JezwpIWfYHOX:
        getattr(zcptFAL0yWNU, 'error'.decode('utf-8'))('Нарушена целостность файлов! Обновитесь с полной заменой папки!'.decode('utf-8'))
        return
    getattr(_dIJgk7A3AIg, 'include_router'.decode('utf-8'))(vlARRACoCOHo)
    if VWiaMPSC0NzU:
        getattr(zcptFAL0yWNU, 'info'.decode('utf-8'))('Запуск в режиме разработки...'.decode('utf-8'))
        await getattr(GiFJytvAvueM, 'delete_webhook'.decode('utf-8'))()
        await mhwkmweqvIZS()
        fPSFiLwtmvLO = [diyel4O5bMLs.create_task(fLL8E8IGPK8S(GiFJytvAvueM))]
        if QnsUyBGFs1xi > 0:
            getattr(fPSFiLwtmvLO, 'append'.decode('utf-8'))(getattr(diyel4O5bMLs, 'create_task'.decode('utf-8'))(I9T087Aiov_5()))
        if a5c3UP8TmpNy > 0:
            getattr(fPSFiLwtmvLO, 'append'.decode('utf-8'))(getattr(diyel4O5bMLs, 'create_task'.decode('utf-8'))(D6P0eecBAFVv()))
        await getattr(_dIJgk7A3AIg, 'start_polling'.decode('utf-8'))(GiFJytvAvueM)
        getattr(zcptFAL0yWNU, 'info'.decode('utf-8'))('Polling остановлен в режиме разработки. Отмена фоновых задач...'.decode('utf-8'))
        for NwVNoYZ0lVgA in fPSFiLwtmvLO:
            getattr(NwVNoYZ0lVgA, 'cancel'.decode('utf-8'))()
        await getattr(diyel4O5bMLs, 'gather'.decode('utf-8'))(*fPSFiLwtmvLO, return_exceptions=1)
    else:
        getattr(zcptFAL0yWNU, 'info'.decode('utf-8'))('Запуск в production режиме...'.decode('utf-8'))
        lqCBDe1lOEOd = fq44kslIKKlh.Application()
        getattr(lqCBDe1lOEOd.on_startup, 'append'.decode('utf-8'))(M6flxKL4gRoX)
        getattr(lqCBDe1lOEOd.on_shutdown, 'append'.decode('utf-8'))(KMS7j9IC8wK5)
        if sDa0ySHsUBbE:
            getattr(lqCBDe1lOEOd.router, 'add_post'.decode('utf-8'))('/yookassa/webhook'.decode('utf-8'), gLLuUhpdiNZQ)
        if U3RbnQ1KQ4Bf:
            getattr(lqCBDe1lOEOd.router, 'add_post'.decode('utf-8'))('/yoomoney/webhook'.decode('utf-8'), FHt_8BTqROto)
        if osp164bN12E4:
            getattr(lqCBDe1lOEOd.router, 'add_post'.decode('utf-8'))('/cryptobot/webhook'.decode('utf-8'), URH6xO9_OvAX)
        if fqoAVnVIRd_I:
            getattr(lqCBDe1lOEOd.router, 'add_post'.decode('utf-8'))('/robokassa/webhook'.decode('utf-8'), eVzbKhmdRT7G)
        if DfumMdwt5gQ6:
            getattr(lqCBDe1lOEOd.router, 'add_get'.decode('utf-8'))(f'{K585qaYUbA_y}{{email}}', CjTWspeGMliC)
        getattr(lqCBDe1lOEOd.router, 'add_get'.decode('utf-8'))(f'{K585qaYUbA_y}{{email}}/{{tg_id}}', hQCziMO4TGCZ)
        getattr(m0HGG4fFzMqQ(dispatcher=_dIJgk7A3AIg, bot=GiFJytvAvueM), 'register'.decode('utf-8'))(lqCBDe1lOEOd, path=jpvzaVV9Pk2G)
        LUxf4g0U9GW3(lqCBDe1lOEOd, _dIJgk7A3AIg, bot=GiFJytvAvueM)
        VEYmCcpb5WZi = fq44kslIKKlh.AppRunner(lqCBDe1lOEOd)
        await getattr(VEYmCcpb5WZi, 'setup'.decode('utf-8'))()
        JutrLWyLwTzT = fq44kslIKKlh.TCPSite(VEYmCcpb5WZi, host=iWt7SquS5uxf, port=LDZldmpRRXTP)
        await getattr(JutrLWyLwTzT, 'start'.decode('utf-8'))()
        getattr(zcptFAL0yWNU, 'info'.decode('utf-8'))(f'URL вебхука: {Di3ZYNq4y1Jk}')
        CRZYKFwfFJRI = diyel4O5bMLs.Event()
        SoAy9XMB2LZJ = diyel4O5bMLs.get_event_loop()
        for aIut2Xl7LjBC in (getattr(pqP1JQ7q8C2M, 'SIGINT'.decode('utf-8')), getattr(pqP1JQ7q8C2M, 'SIGTERM'.decode('utf-8'))):
            getattr(SoAy9XMB2LZJ, 'add_signal_handler'.decode('utf-8'))(aIut2Xl7LjBC, getattr(CRZYKFwfFJRI, 'set'.decode('utf-8')))
        try:
            await getattr(CRZYKFwfFJRI, 'wait'.decode('utf-8'))()
        finally:
            g5gb1yodGaJT = [NwVNoYZ0lVgA for NwVNoYZ0lVgA in diyel4O5bMLs.all_tasks() if NwVNoYZ0lVgA is not diyel4O5bMLs.current_task()]
            for NwVNoYZ0lVgA in g5gb1yodGaJT:
                try:
                    getattr(NwVNoYZ0lVgA, 'cancel'.decode('utf-8'))()
                except Exception as hsEaj3FbHlV3:
                    getattr(zcptFAL0yWNU, 'error'.decode('utf-8'))(hsEaj3FbHlV3)
            await getattr(diyel4O5bMLs, 'gather'.decode('utf-8'))(*g5gb1yodGaJT, return_exceptions=1)
if __name__ == '__main__'.decode('utf-8'):
    QK5bLxBOypkF()
    try:
        getattr(diyel4O5bMLs, 'run'.decode('utf-8'))(WeQFJHP3LH_W())
    except Exception as hsEaj3FbHlV3:
        getattr(zcptFAL0yWNU, 'error'.decode('utf-8'))(f'Ошибка при запуске приложения:\n{hsEaj3FbHlV3}')